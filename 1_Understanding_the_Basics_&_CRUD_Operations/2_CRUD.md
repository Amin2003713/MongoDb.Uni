
۱. ساختن (Create):
```javascript
insertOne(Data , Options):
```
استفاده: برای اضافه کردن یک رکورد به مجموعه.
مثال:
```javascript
db.users.insertOne({ name: "Alice", age: 25, city: "London" })
```
توضیحات: این دستور یک رکورد جدید را به مجموعه اضافه می‌کند.
```javascript
insertMany(Data , Options):
```
استفاده: برای اضافه کردن چندین رکورد به مجموعه.
مثال:
```javascript

db.users.insertMany([
  { name: "Bob", age: 30, city: "Paris" },
  { name: "Charlie", age: 35, city: "New York" }
])
```
توضیحات: این دستور چندین رکورد جدید را به مجموعه اضافه می‌کند.
۲. خواندن (Read):
```javascript
find(Filter , Options):
```
استفاده: برای بازیابی تمام رکوردهای مجموعه.
مثال:

```javascript
db.users.find() // returns All the Docs 
```
توضیحات: این دستور همه رکوردهای موجود در مجموعه را بازیابی می‌کند.
```javascript
findOne(Filter , Options): // retun ony the matching Doc
``` 




استفاده: برای بازیابی یک رکورد اولیه از مجموعه.
مثال:
```javascript
db.users.findOne({ city: "London" })
```
توضیحات: این دستور یک رکورد اولیه که با شرط داده شده همخوانی دارد را بازیابی می‌کند.


**۸. فیلتر برابری با مقدار مشخص ($eq):**
```javascript
db.users.find({ age: { $eq: 30 }, city: { $eq: "London" } })
```
این دستور تمامی اسنادی را که سن آنها برابر با 30 و شهر آنها برابر با "London" است را بازیابی می‌کند.

**۹. فیلتر بزرگتر از یک مقدار مشخص ($gt):**
```javascript
db.users.find({ age: { $gt: 30 } })
```
این دستور تمامی اسنادی را که سن آنها بیشتر از 30 است را بازیابی می‌کند.

**۱۰. فیلتر کوچکتر از یک مقدار مشخص ($lt):**
```javascript
db.users.find({ age: { $lt: 25 } })
```
این دستور تمامی اسنادی را که سن آنها کمتر از 25 است را بازیابی می‌کند.

**۱۱. فیلتر بزرگتر مساوی یک مقدار مشخص ($gte) و کوچکتر مساوی یک مقدار مشخص ($lte) با هم:**
```javascript
db.users.find({ age: { $gte: 20, $lte: 40 } })
```
این دستور تمامی اسنادی را که سن آنها بزرگتر مساوی 20 و کوچکتر مساوی 40 است را بازیابی می‌کند.

**۱۲. فیلتر با استفاده از عبارت‌های منظم ($regex) و مقایسه با رشته‌ها:**
```javascript
db.users.find({ name: { $regex: /an$/ } })
```
این دستور تمامی اسنادی را که نام آنها با حرف "an" خاتمه می‌شود را بازیابی می‌کند.

**۱۳. فیلتر بر اساس وجود یک فیلد ($exists):**
```javascript
db.users.find({ address: { $exists: true } })
```
این دستور تمامی اسنادی را که فیلد آدرس در آنها وجود دارد را بازیابی می‌کند.

**۱۴. فیلتر بر اساس عملگر AND با استفاده از شرایط مختلف:**
```javascript
db.users.find({ $and: [ { age: { $gte: 20 } }, { age: { $lt: 30 } } ] })
```
این دستور تمامی اسنادی را که سن آنها بزرگتر مساوی 20 و کوچکتر از 30 است را بازیابی می‌کند.

**۱۵. فیلتر بر اساس عملگر OR با استفاده از شرایط مختلف:**
```javascript
db.users.find({ $or: [ { age: { $lt: 20 } }, { age: { $gte: 40 } } ] })
```
این دستور تمامی اسنادی را که سن آنها کمتر از 20 یا بزرگتر مساوی 40 است را بازیابی می‌کند.

**۱۶. فیلتر بر اساس متن درون آرایه ($elemMatch):**
```javascript
db.users.find({ hobbies: { $elemMatch: { name: "Reading", level: "Advanced" } } })
```
این دستور تمامی اسنادی را که در آرایه `User`، شامل یک مورد با نام "Reading" و سطح "Advanced" هستند را بازیابی می‌کند.


۳. به‌روزرسانی (Update):
```javascript
updateOne(Filter , Data , Options):
```
استفاده: برای به‌روزرسانی یک رکورد در مجموعه.
مثال:
```javascript
db.users.updateOne({ name: "Alice" }, { $set: { age: 26 } })
```

توضیحات: این دستور اولین رکوردی که با شرط داده شده همخوانی دارد را به روزرسانی می‌کند.
```javascript
updateMany(Filter , Data , Options):
```
استفاده: برای به‌روزرسانی چندین رکورد در مجموعه.
مثال:
```javascript
db.users.updateMany({ age: { $lt: 30 } }, { $set: { city: "Berlin" } })
```

توضیحات: این دستور تمامی رکوردهایی که با شرط داده شده همخوانی دارند را به روزرسانی می‌کند.

وقتی که می‌خواهید در یک دستور به روزرسانی (`update`) یک فیلد جدید به یک سند در MongoDB اضافه کنید، می‌توانید از عملیات `$set` استفاده کنید. این عملیات به شما امکان می‌دهد یک فیلد جدید به سند اضافه کنید یا یک فیلد موجود را به روزرسانی کنید. 

بیایید با یک مثال این موضوع را بررسی کنیم. فرض کنید که ما یک مجموعه داریم که دارای اسنادی با فرمت زیر است:

```javascript
{
  "_id": ObjectId("..."),
  "name": "Alice",
  "age": 30
}
```

حالا فرض کنید که می‌خواهیم به این سند یک فیلد جدید به نام `city` با مقدار "London" اضافه کنیم. از دستور `updateOne()` برای انجام این کار استفاده می‌کنیم:

```javascript
db.users.updateOne(
  // فیلتر برای یافتن سند مورد نظر
  { name: "Alice" },
  // عملیات برای به‌روزرسانی سند
  { $set: { city: "London" } }
)
```

در این دستور:

- `{ name: "Alice" }`: فیلتری است که مشخص می‌کند که کدام سند باید به‌روزرسانی شود.
- `{ $set: { city: "London" } }`: این بخش به ما می‌گوید که فیلد `city` با مقدار "London" به سند اضافه شود یا اگر قبلاً وجود داشته باشد، مقدار آن را به "London" تغییر دهد.

بعد از اجرای این دستور، سند متناظر با `name: "Alice"` در مجموعه، به صورت زیر به‌روزرسانی می‌شود:

```javascript
{
  "_id": ObjectId("..."),
  "name": "Alice",
  "age": 30,
  "city": "London"
}
```

به این ترتیب، با استفاده از دستور `updateOne()` و عملیات `$set` می‌توانید به سادگی یک فیلد جدید به یک سند در MongoDB اضافه کنید.

۴. حذف (Delete):
```javascript
deleteOne(Filter , Options):
```
استفاده: برای حذف یک رکورد از مجموعه.
مثال:
```javascript
db.users.deleteOne({ name: "Bob" })
```
توضیحات: این دستور اولین رکوردی که با شرط داده شده همخوانی دارد را حذف می‌کند.
```javascript
deleteMany(Filter , Options):
```
استفاده: برای حذف چندین رکورد از مجموعه.
مثال:
```javascript
db.users.deleteMany({ age: { $gte: 30 } })
```

توضیحات: این دستور تمامی رکوردهایی که با شرط داده شده همخوانی دارند را حذف می‌کند.
۵. جایگزینی (Replace):
```javascript
replaceOne(Filter , Data , Options):
```
استفاده: برای جایگزینی یک رکورد موجود در مجموعه با یک رکورد جدید.
مثال:
```javascript
db.users.replaceOne({ name: "Alice" }, { name: "Alice", age: 26, city: "Berlin" })
```
توضیحات: این دستور یک رکورد موجود با رکورد جدیدی با استفاده از شناسه مورد نظر جایگزین می‌کند.




فیلتر (Filter):

فیلتر یک شرط یا معیاری است که برای انتخاب رکوردهای مورد نظر در عملیات CRUD در MongoDB استفاده می‌شود. این شرط می‌تواند یک شرط ساده مانند مقایسه یک فیلد با یک مقدار خاص باشد، یا شامل شرایط پیچیده‌تری با استفاده از عملگرهای مقایسه‌ای مختلف مانند `$gt` (بزرگتر از)، `$lt` (کوچکتر از)، `$in` (عضویت در آرایه)، `$regex` (عبارت منظم) و غیره باشد.

داده (Data):

داده‌ها، اطلاعاتی هستند که برای انجام عملیات CRUD در MongoDB استفاده می‌شوند. در عملیات `insertOne` و `insertMany`، داده‌ها شامل اسناد جدیدی هستند که باید به مجموعه اضافه شوند.
در عملیات`updateOne`، `updateMany` و `replaceOne`، داده‌ها شامل اسناد جدیدی هستند که باید جایگزین اسناد موجود در مجموعه شوند یا تغییرات لازم را در اسناد موجود اعمال کنند.

گزینه‌ها (Options):

گزینه‌ها، تنظیمات اضافی هستند که می‌توان در عملیات CRUD در MongoDB استفاده کرد. برخی از گزینه‌های رایج عبارتند از:

upsert: در عملیات `updateOne` و `updateMany`، اگر هیچ سندی با شرایط فیلتر داده شده پیدا نشود، یک سند جدید با داده‌های ارسالی ایجاد می‌شود.
multi: در عملیات `updateMany` و `deleteMany`، تعیین می‌کند که آیا باید تمام اسناد مطابق با شرایط فیلتر را به‌روزرسانی یا حذف کند یا فقط اولین سند را.
writeConcern: سطح تضمین دیتابیس را برای عملیات نوشتن تعیین می‌کند.
مثال‌های استفاده از گزینه‌ها:

```javascript
db.users.insertOne({ name: "Alice" }, { writeConcern: { w: "majority" } }) // استفاده از گزینه upsert در عملیات insertOne

 
db.users.updateMany({ age: { $lt: 30 } }, { $set: { city: "Berlin" } }, { multi: true }) // استفاده از گزینه multi در عملیات updateMany


db.users.deleteOne({ name: "Bob" }, { writeConcern: { w: 1 } }) // استفاده از گزینه writeConcern در عملیات deleteOne

```

به طور مثال، فرض کنید که شما یک مجموعه دارای اسنادی با ساختار زیر دارید:

```javascript
[
  { name: "Alice", age: 25, city: "London" },
  { name: "Bob", age: 30, city: "Paris" },
  { name: "Charlie", age: 35, city: "New York" },
  { name: "David", age: 28, city: "Berlin" }
]
```
حالا با استفاده از این مجموعه، مثال‌های بیشتری از استفاده از فیلتر، داده و گزینه‌ها را بررسی می‌کنیم:

فیلتر (Filter):
استفاده از مقایسه‌های مختلف:

```javascript
db.users.find({ age: { $gt: 27 } }) // فیلتر کردن اسناد با سن بزرگتر از ۲۷ سال


db.users.find({ name: /^A/ }) // فیلتر کردن اسناد با نام شروع شده با حرف "A"

```
داده (Data):
استفاده در عملیات insertOne:

```javascript
db.users.insertOne({ name: "Eve", age: 22, city: "Tokyo" }) // اضافه کردن یک رکورد جدید به مجموعه
```
استفاده در عملیات updateOne:

```javascript
db.users.updateOne({ name: "Alice" }, { $set: { age: 26 } }) // به‌روزرسانی سن شخص با نام "Alice"

```
گزینه‌ها (Options):
استفاده از گزینه upsert:

```javascript
db.users.updateOne({ name: "Eve" }, { $set: { age: 23 } }, { upsert: true }) // در صورت عدم یافتن اسند با نام "Eve"، اضافه کردن آن به مجموعه

```
استفاده از گزینه multi:

```javascript
db.users.deleteMany({ age: { $gt: 27 } }, { multi: true }) // حذف همه اسناد با سن بزرگتر از ۲۷ سال

```
با این مثال‌ها، امیدوارم مفاهیم فیلتر، داده و گزینه‌ها در عملیات CRUD در MongoDB برای شما واضح‌تر شده باشد.




** Errors ** 

**۱. ساختن (Create) - خطای دسترسی:**

**مثال**: 
```javascript
db.users.insertOne({ name: "Alice", age: 30 })
```

**نتیجه**: 
```
WriteError({code: 13, message: "not authorized on database to execute command"})
```

**راه حل**: برای رفع این خطا، اطمینان حاصل کنید که کاربر مورد نظر دسترسی لازم به مجموعه داده ("User Collection" در اینجا) را دارد و مجوزهای لازم برای انجام عملیات CRUD در آن مجموعه دارد.

---

**۲. خواندن (Read) - خطای وجود نداشتن سند:**

**مثال**: 
```javascript
db.users.findOne({ name: "John" })
```

**نتیجه**: 
```
null
```

**راه حل**: اطمینان حاصل کنید که فیلتر استفاده شده در دستور CRUD وجود دارد و به درستی تنظیم شده است. در این مثال، مطمئن شوید که کاربر با نام "John" وجود دارد.

---

**۳. به‌روزرسانی (Update) - خطای وجود نداشتن سند:**

**مثال**: 
```javascript
db.users.updateOne({ name: "John" }, { $set: { age: 40 } })
```

**نتیجه**: 
```
{ "acknowledged" : true, "matchedCount" : 0, "modifiedCount" : 0 }
```

**راه حل**: بررسی کنید که فیلتر مورد استفاده در دستور CRUD به درستی تنظیم شده است و سند مورد نظر واقعاً وجود دارد. در این مثال، مطمئن شوید که کاربر با نام "John" وجود دارد تا به‌روزرسانی اعمال شود.

---

**۴. حذف (Delete) - خطای وجود نداشتن سند:**

**مثال**: 
```javascript
db.users.deleteOne({ name: "John" })
```

**نتیجه**: 
```
{ "acknowledged" : true, "deletedCount" : 0 }
```

**راه حل**: مطمئن شوید که فیلتر استفاده شده در دستور CRUD به درستی تنظیم شده است و سند مورد نظر واقعاً وجود دارد. در این مثال، مطمئن شوید که کاربر با نام "John" وجود دارد تا حذف اعمال شود.

---

**۵. حذف (Delete) - خطای نحوی (Syntax Error):**

**مثال**: 
```javascript
db.users.deleteMany(Marker:'Delete')
```

**نتیجه**: 
```
SyntaxError: Unexpected token, expected "," (1:28)
```

**راه حل**: اطمینان حاصل کنید که ساختار دستور CRUD به درستی استفاده شده است. در این مثال، اطمینان حاصل کنید که فیلتر به عنوان یک شیء JSON ارسال شده و هر کلید و مقدار با کاما جدا شده است. به عنوان مثال: `{ Marker: 'Delete' }` به جای `Marker:'Delete'` استفاده کنید.
